{"diagram":{"elements":{"elements":{"176609b77d9703":{"textBlock":[],"dataAttributes":[],"points":[{"x":533,"y":2758.75},{"x":533,"y":2758.75}],"props":{"zindex":80},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"angle":4.71238898038469,"y":2722.25,"id":"176609a26394ac"},"to":{"x":533,"angle":1.570796326794897,"y":2792.5,"id":"17660994b41c97"},"id":"176609b77d9703","text":"","locked":false,"group":""},"173f00217365c7":{"textBlock":[],"points":[{"x":861.625,"y":385},{"x":861.625,"y":385}],"dataAttributes":[],"props":{"zindex":14},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":805.5,"angle":3.141592653589793,"y":385,"id":"173effecf7fed4"},"id":"173f00217365c7","to":{"x":918.75,"angle":0,"y":385,"id":"173f001cea76f1"},"text":"","locked":false,"group":""},"1766095e7dba87":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div><br></div><div><span style=\"font-size: inherit;\">Service.java</span><br></div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"矩形","dataAttributes":[{"name":"序号","id":"1766095e7db5be","category":"default","type":"number","value":""},{"name":"名称","id":"1766095e7db94f","category":"default","type":"string","value":""},{"name":"所有者","id":"1766095e7db94","category":"default","type":"string","value":""},{"name":"连接","id":"1766095e7dbbb6","category":"default","type":"link","value":""},{"name":"便笺","id":"1766095e7dbaeb","category":"default","type":"string","value":""}],"props":{"zindex":59,"w":98.25,"h":52,"x":168.375,"y":2459,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766095e7dba87","category":"basic","locked":false,"group":""},"1741e63eed4f5d":{"textBlock":[],"dataAttributes":[],"points":[{"x":1629.7356288580233,"y":803},{"x":1629.7356288580233,"y":1505.5},{"x":248,"y":1505.5}],"props":{"zindex":52},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1599.7356288580233,"y":803,"angle":3.141592653589793,"id":"173f0305c5f59b"},"to":{"x":248,"angle":1.5707963267948963,"y":1535.5,"id":"173f12a360a642"},"id":"1741e63eed4f5d","text":"","locked":false,"group":""},"176609b588f3a6":{"textBlock":[],"points":[{"x":533,"y":2644.875},{"x":533,"y":2644.875}],"dataAttributes":[],"props":{"zindex":79},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"y":2612.5,"angle":4.71238898038469,"id":"1766098db922c3"},"id":"176609b588f3a6","to":{"x":533,"y":2677.25,"angle":1.570796326794897,"id":"176609a26394ac"},"text":"","locked":false,"group":""},"176601a0f4f0ec":{"textBlock":[],"points":[{"x":1076.5084876543208,"y":1957.2222222222217},{"x":1076.5084876543208,"y":1957.2222222222217}],"dataAttributes":[],"props":{"zindex":58},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1076.5084876543208,"angle":4.71238898038469,"y":1915,"id":"1766019e298276"},"id":"176601a0f4f0ec","to":{"x":1076.5084876543208,"y":2001.6666666666654,"angle":1.570796326794897,"id":"1766018d968322"},"text":"","locked":false,"group":""},"173f15a94d5416":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"the_context_object就是在ServiceManger的main方法里面设置的ServiceManager对象"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f15a9641cb1","category":"default","type":"number","value":""},{"name":"名称","id":"173f15a96417dd","category":"default","type":"string","value":""},{"name":"所有者","id":"173f15a9641373","category":"default","type":"string","value":""},{"name":"连接","id":"173f15a9641b4","category":"default","type":"link","value":""},{"name":"便笺","id":"173f15a96414b9","category":"default","type":"string","value":""}],"props":{"zindex":43,"w":283,"h":65,"x":106.5,"y":1738.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f15a94d5416","category":"basic","locked":false,"group":""},"1766097f767eaf":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>BinderProxy.java</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"middle"},"title":"矩形","dataAttributes":[{"name":"序号","id":"1766097f862e59","category":"default","type":"number","value":""},{"name":"名称","id":"1766097f862b12","category":"default","type":"string","value":""},{"name":"所有者","id":"1766097f862bfe","category":"default","type":"string","value":""},{"name":"连接","id":"1766097f86272e","category":"default","type":"link","value":""},{"name":"便笺","id":"1766097f8627d6","category":"default","type":"string","value":""}],"props":{"zindex":61,"w":151,"h":45,"x":457.5,"y":2462.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766097f767eaf","category":"basic","locked":false,"group":""},"173f02797e4807":{"textBlock":[],"points":[{"x":248,"y":914.75},{"x":248,"y":914.75}],"dataAttributes":[],"props":{"zindex":23},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":248,"angle":4.71238898038469,"y":835.5,"id":"173f00aa91a77a"},"id":"173f02797e4807","to":{"x":248,"angle":1.570796326794897,"y":997.5,"id":"173f0276e157b2"},"text":"","locked":false,"group":""},"173effecf7fed4":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"getStrongProxyForHandle(0)"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173effed6bfd9b","category":"default","type":"number","value":""},{"name":"名称","id":"173effed6bfbc","category":"default","type":"string","value":""},{"name":"所有者","id":"173effed6bf235","category":"default","type":"string","value":""},{"name":"连接","id":"173effed6bf02d","category":"default","type":"link","value":""},{"name":"便笺","id":"173effed6bf35e","category":"default","type":"string","value":""}],"props":{"zindex":8,"w":211,"h":65,"x":594.5,"angle":0,"y":352.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173effecf7fed4","category":"basic","locked":false,"group":""},"173f02aecfa487":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"1：cmd为BC_TRANSACTION<div><br></div><div>2:mOut.writeInt32(cmd);</div><div></div>    mOut.write(&amp;tr, sizeof(tr));<div><br></div><div>请求数据保存在mOut中</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f02aed044b7","category":"default","type":"number","value":""},{"name":"名称","id":"173f02aed04f13","category":"default","type":"string","value":""},{"name":"所有者","id":"173f02aed0450d","category":"default","type":"string","value":""},{"name":"连接","id":"173f02aed041a9","category":"default","type":"link","value":""},{"name":"便笺","id":"173f02aed043bc","category":"default","type":"string","value":""}],"props":{"zindex":25,"w":292,"h":120.5,"x":456,"angle":0,"y":969.75},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f02aecfa487","category":"basic","locked":false,"group":""},"173f15a642499":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>onTransact</div>out/soong/.intermediates/frameworks/native/libs/binder/libbinder_aidl_test_stub-cpp-source/gen/android/os/IServiceManager.cpp"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f15a67e0321","category":"default","type":"number","value":""},{"name":"名称","id":"173f15a67e09a1","category":"default","type":"string","value":""},{"name":"所有者","id":"173f15a67e0e9f","category":"default","type":"string","value":""},{"name":"连接","id":"173f15a67e02cf","category":"default","type":"link","value":""},{"name":"便笺","id":"173f15a67e09a1","category":"default","type":"string","value":""}],"props":{"zindex":41,"w":389.1351996527778,"h":205,"x":535.1148003472222,"y":1468.0668402777778,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f15a642499","category":"basic","locked":false,"group":""},"176609e34b6eed":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"服务保存的地方，提供IBinder"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"备注","dataAttributes":[{"name":"序号","id":"176609e34b6fad","category":"default","type":"number","value":""},{"name":"名称","id":"176609e34b6602","category":"default","type":"string","value":""},{"name":"所有者","id":"176609e34b6d85","category":"default","type":"string","value":""},{"name":"连接","id":"176609e34b689d","category":"default","type":"link","value":""},{"name":"便笺","id":"176609e34b6daf","category":"default","type":"string","value":""}],"props":{"zindex":88,"w":220.80888310185173,"h":58.25,"x":703.4411168981483,"angle":0,"y":2785.875},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"176609e34b6eed","category":"basic","locked":false,"group":""},"1766018d968322":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"","dataAttributes":[],"props":{"zindex":54,"w":548.7500000000002,"h":383.8888888888896,"x":802.1334876543209,"y":2001.6666666666654,"angle":0},"path":[{"lineStyle":{"lineWidth":0},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"standardImage","fillStyle":{"imageW":955,"display":"stretch","imageH":694,"type":"image","fileId":"http://cdn.processon.com/5fd71099e401fd06ddc214e6?e=1607933609&amp;token=trhI0BY8QfVrIGn9nENop6JAc6l5nZuxhjQ62UfM:jX8-kqBr36ZXMEJO1eLyAMFKA3k="},"attribute":{"container":false,"rotatable":true,"visible":false,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766018d968322","category":"standard","locked":false,"group":""},"176609dd3a5f16":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"自己实现的BInder服务"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"备注","dataAttributes":[{"name":"序号","id":"176609dd517e12","category":"default","type":"number","value":""},{"name":"名称","id":"176609dd517f57","category":"default","type":"string","value":""},{"name":"所有者","id":"176609dd51706e","category":"default","type":"string","value":""},{"name":"连接","id":"176609dd51784f","category":"default","type":"link","value":""},{"name":"便笺","id":"176609dd51723c","category":"default","type":"string","value":""}],"props":{"zindex":86,"w":138,"h":65,"x":992,"angle":0,"y":2452.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"176609dd3a5f16","category":"basic","locked":false,"group":""},"173ec5bfe5866c":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"1:&nbsp;&nbsp;sp&lt;ServiceManager&gt; manager = new ServiceManager(std::make_unique&lt;Access&gt;());<div><br></div><div>初始化ServiceManger</div><div><br></div><div>2：IPCThreadState::self()-&gt;setTheContextObject(manager);</div><div><br></div><div>设置ServiceManager作为消息的最终处理对象，这个非常重要，最后消息将会由ServiceManager的父类重写的onTransact处理，详见(IServiceManager.cpp (Generated)<span style=\"font-size: inherit;\">)第377行</span></div><div><span style=\"font-size: inherit;\"><br></span></div><div><span style=\"font-size: inherit;\">3:开启Looper，等待客户端连接</span></div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173ec5bfe58629","category":"default","type":"number","value":""},{"name":"名称","id":"173ec5bfe58be7","category":"default","type":"string","value":""},{"name":"所有者","id":"173ec5bfe58171","category":"default","type":"string","value":""},{"name":"连接","id":"173ec5bfe58ed8","category":"default","type":"link","value":""},{"name":"便笺","id":"173ec5bfe58d86","category":"default","type":"string","value":""}],"props":{"zindex":2,"w":395,"h":219,"x":20,"angle":0,"y":32},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173ec5bfe5866c","category":"basic","locked":false,"group":""},"176609a9723852":{"textBlock":[],"points":[{"x":848,"y":2699.75}],"dataAttributes":[],"props":{"zindex":76},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":616.5,"y":2699.75,"angle":3.141592653589793,"id":"176609a26394ac"},"id":"176609a9723852","to":{"x":848,"angle":4.71238898038469,"y":2667.5,"id":"17660992929d7b"},"text":"","locked":false,"group":""},"173f02c81114b6":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"1:构建binder_write_read结构体，保存请求数据，返回数据对象，以及偏移量<div><br></div><div>2：ioctl(mProcess-&gt;mDriverFD, BINDER_WRITE_READ, &amp;bwr) &gt;= 0</div><div><br></div><div>驱动调用，指令为BINDER_WRITE_READ</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f02c81e976a","category":"default","type":"number","value":""},{"name":"名称","id":"173f02c81e94bf","category":"default","type":"string","value":""},{"name":"所有者","id":"173f02c81e9ec3","category":"default","type":"string","value":""},{"name":"连接","id":"173f02c81e9c67","category":"default","type":"link","value":""},{"name":"便笺","id":"173f02c81e9b98","category":"default","type":"string","value":""}],"props":{"zindex":28,"w":333.53125,"h":145.5,"x":783.109375,"y":941.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f02c81114b6","category":"basic","locked":false,"group":""},"17663eb5294d87":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>JavaBBinder.c</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"middle"},"title":"矩形","dataAttributes":[{"name":"序号","id":"17663eb539fa5c","category":"default","type":"number","value":""},{"name":"名称","id":"17663eb539fde5","category":"default","type":"string","value":""},{"name":"所有者","id":"17663eb539ff2e","category":"default","type":"string","value":""},{"name":"连接","id":"17663eb539fc8e","category":"default","type":"link","value":""},{"name":"便笺","id":"17663eb539f774","category":"default","type":"string","value":""}],"props":{"zindex":90,"w":151,"h":45,"x":772.5,"angle":0,"y":2544.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17663eb5294d87","category":"basic","locked":false,"group":""},"173effecf7f0f7":{"textBlock":[],"points":[{"x":275,"y":385},{"x":275,"y":385}],"dataAttributes":[],"props":{"zindex":7},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":237.5,"angle":3.141592653589793,"y":385,"id":"173effecf7f297"},"id":"173effecf7f0f7","to":{"x":311.5,"angle":0,"y":385,"id":"173effecf7f083"},"text":"","locked":false,"group":""},"ovgLIzYluc444272":{"textBlock":[],"points":[{"x":1243,"y":1972},{"x":1380.883487654321,"y":1972},{"x":1380.883487654321,"y":2021},{"x":1212,"y":2021}],"dataAttributes":[],"props":{"zindex":93},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1243,"angle":1.5707963267948966,"y":2002,"id":"1766018d968322"},"id":"ovgLIzYluc444272","text":"","to":{"x":1212,"y":2051},"locked":false,"group":""},"17660994b41c97":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"ServiceManager.cpp"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"17660994c224a2","category":"default","type":"number","value":""},{"name":"名称","id":"17660994c22606","category":"default","type":"string","value":""},{"name":"所有者","id":"17660994c22573","category":"default","type":"string","value":""},{"name":"连接","id":"17660994c22e03","category":"default","type":"link","value":""},{"name":"便笺","id":"17660994c222c3","category":"default","type":"string","value":""}],"props":{"zindex":70,"w":167,"h":45,"x":449.5,"y":2792.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17660994b41c97","category":"basic","locked":false,"group":""},"176609c7d43308":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"getService,addService"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"备注","dataAttributes":[{"name":"序号","id":"176609c7d43daf","category":"default","type":"number","value":""},{"name":"名称","id":"176609c7d43f44","category":"default","type":"string","value":""},{"name":"所有者","id":"176609c7d43f64","category":"default","type":"string","value":""},{"name":"连接","id":"176609c7d4308e","category":"default","type":"link","value":""},{"name":"便笺","id":"176609c7d43e2a","category":"default","type":"string","value":""}],"props":{"zindex":82,"w":167,"h":52,"x":132,"y":2571.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"176609c7d43308","category":"basic","locked":false,"group":""},"17660a07e9ef65":{"textBlock":[],"points":[{"x":659.9705584490741,"y":2815},{"x":659.9705584490741,"y":2815}],"dataAttributes":[],"props":{"zindex":89},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":616.5,"angle":3.141592653589793,"y":2815,"id":"17660994b41c97"},"id":"17660a07e9ef65","to":{"x":703.4411168981483,"angle":0,"y":2815,"id":"176609e34b6eed"},"text":"","locked":false,"group":""},"17663eb8ed5d51":{"textBlock":[],"points":[{"x":848,"y":2606},{"x":848,"y":2606}],"dataAttributes":[],"props":{"zindex":92},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":848,"angle":1.570796326794897,"y":2622.5,"id":"17660992929d7b"},"id":"17663eb8ed5d51","to":{"x":848,"angle":4.71238898038469,"y":2589.5,"id":"17663eb5294d87"},"text":"","locked":false,"group":""},"17660987e78d74":{"textBlock":[],"dataAttributes":[],"points":[{"x":533,"y":2425.625},{"x":848,"y":2425.625}],"props":{"zindex":63},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"y":2390.25,"angle":4.71238898038469,"id":"17660960fe552b"},"to":{"x":848,"angle":1.570796326794897,"y":2462.5,"id":"1766098601a956"},"id":"17660987e78d74","text":"","locked":false,"group":""},"173effecf7f297":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"ServiveManager.addService"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173effed6bf70c","category":"default","type":"number","value":""},{"name":"名称","id":"173effed6bfc9d","category":"default","type":"string","value":""},{"name":"所有者","id":"173effed6bfdfc","category":"default","type":"string","value":""},{"name":"连接","id":"173effed6bf767","category":"default","type":"link","value":""},{"name":"便笺","id":"173effed6bffac","category":"default","type":"string","value":""}],"props":{"zindex":4,"w":191,"h":81,"x":46.5,"angle":0,"y":344.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173effecf7f297","category":"basic","locked":false,"group":""},"173f001cea76f1":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"javaObjectForIBinder"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f001d029dbd","category":"default","type":"number","value":""},{"name":"名称","id":"173f001d029c6d","category":"default","type":"string","value":""},{"name":"所有者","id":"173f001d0293a2","category":"default","type":"string","value":""},{"name":"连接","id":"173f001d029d6d","category":"default","type":"link","value":""},{"name":"便笺","id":"173f001d029c6a","category":"default","type":"string","value":""}],"props":{"zindex":11,"w":211,"h":65,"x":918.75,"angle":0,"y":352.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f001cea76f1","category":"basic","locked":false,"group":""},"17660196069502":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"binder(one way)流程图"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"17660196069bc9","category":"default","type":"number","value":""},{"name":"名称","id":"1766019606907c","category":"default","type":"string","value":""},{"name":"所有者","id":"17660196069b75","category":"default","type":"string","value":""},{"name":"连接","id":"17660196069c9a","category":"default","type":"link","value":""},{"name":"便笺","id":"17660196069a5b","category":"default","type":"string","value":""}],"props":{"zindex":55,"w":206,"h":52,"x":305.8125,"angle":0,"y":1863},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17660196069502","category":"basic","locked":false,"group":""},"17660988748819":{"textBlock":[],"dataAttributes":[],"points":[{"x":533,"y":2429.125},{"x":533,"y":2429.125}],"props":{"zindex":64},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"y":2390.25,"angle":4.71238898038469,"id":"17660960fe552b"},"to":{"x":533,"y":2462.5,"angle":1.570796326794897,"id":"1766097f767eaf"},"id":"17660988748819","text":"","locked":false,"group":""},"176609d6409a75":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"Binder对象存在于进程的红黑树中"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"备注","dataAttributes":[{"name":"序号","id":"176609d6510cec","category":"default","type":"number","value":""},{"name":"名称","id":"176609d6510c61","category":"default","type":"string","value":""},{"name":"所有者","id":"176609d65100db","category":"default","type":"string","value":""},{"name":"连接","id":"176609d6510b4b","category":"default","type":"link","value":""},{"name":"便笺","id":"176609d6510ce7","category":"default","type":"string","value":""}],"props":{"zindex":84,"w":138,"h":65,"x":987,"angle":0,"y":2612.25},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"176609d6409a75","category":"basic","locked":false,"group":""},"173f0273d3d5cf":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div></div>writeTransactionData"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f0273e3eefa","category":"default","type":"number","value":""},{"name":"名称","id":"173f0273e3e3f2","category":"default","type":"string","value":""},{"name":"所有者","id":"173f0273e3e0b6","category":"default","type":"string","value":""},{"name":"连接","id":"173f0273e3e60b","category":"default","type":"link","value":""},{"name":"便笺","id":"173f0273e3ea55","category":"default","type":"string","value":""}],"props":{"zindex":21,"w":211,"h":65,"x":496.5,"angle":0,"y":770.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f0273d3d5cf","category":"basic","locked":false,"group":""},"173f02c9988e2f":{"textBlock":[],"points":[{"x":949.875,"y":887.25},{"x":949.875,"y":887.25}],"dataAttributes":[],"props":{"zindex":30},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":949.875,"angle":4.71238898038469,"y":835.5,"id":"173f02bf2619fd"},"id":"173f02c9988e2f","to":{"x":949.875,"y":941.5,"angle":1.570796326794897,"id":"173f02c81114b6"},"text":"","locked":false,"group":""},"173f00abeeab53":{"textBlock":[],"points":[{"x":1678,"y":385},{"x":1678,"y":722},{"x":248,"y":722}],"dataAttributes":[],"props":{"zindex":20},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1646.75,"angle":3.141592653589793,"y":385,"id":"173f00621341fc"},"id":"173f00abeeab53","to":{"x":248,"angle":1.570796326794897,"y":770.5,"id":"173f00aa91a77a"},"text":"","locked":false,"group":""},"173f009af4b88c":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"&nbsp;_data.writeInterfaceToken(DESCRIPTOR);<div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data.writeString(name);<div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data.writeStrongBinder(service);<div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data.writeInt(((allowIsolated)?(1):(0)));<div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data.writeInt(dumpPriority);<div></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean _status = mRemote.transact(Stub.TRANSACTION_addService, _data, _reply, 0);<div><br></div><div>这里的mRemote为BinderProxy对象,请求数据会被存在Parcel连续内存中</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f009b0864ed","category":"default","type":"number","value":""},{"name":"名称","id":"173f009b086a32","category":"default","type":"string","value":""},{"name":"所有者","id":"173f009b086f6d","category":"default","type":"string","value":""},{"name":"连接","id":"173f009b086a41","category":"default","type":"link","value":""},{"name":"便笺","id":"173f009b086cab","category":"default","type":"string","value":""}],"props":{"zindex":17,"w":361,"h":205,"x":1259.875,"y":474.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f009af4b88c","category":"basic","locked":false,"group":""},"173f02c94635b4":{"textBlock":[],"points":[{"x":775.875,"y":803},{"x":775.875,"y":803}],"dataAttributes":[],"props":{"zindex":29},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":707.5,"angle":3.141592653589793,"y":803,"id":"173f0273d3d5cf"},"id":"173f02c94635b4","to":{"x":845.75,"angle":0,"y":803,"id":"173f02bf2619fd"},"text":"","locked":false,"group":""},"173f00a525b7d9":{"textBlock":[],"points":[{"x":1515.75,"y":444.75},{"x":1440.375,"y":444.75}],"dataAttributes":[],"props":{"zindex":18},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1515.75,"angle":4.71238898038469,"y":417.5,"id":"173f00621341fc"},"id":"173f00a525b7d9","to":{"x":1440.375,"y":474.5,"angle":1.570796326794897,"id":"173f009af4b88c"},"text":"","locked":false,"group":""},"173f030b9f89cd":{"textBlock":[],"dataAttributes":[],"points":[{"x":1207.2428144290116,"y":803},{"x":1207.2428144290116,"y":803}],"props":{"zindex":32},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1056.75,"y":803,"angle":3.141592653589793,"id":"173f02bf2619fd"},"to":{"x":1360.4856288580233,"y":803,"angle":0,"id":"173f0305c5f59b"},"id":"173f030b9f89cd","text":"","locked":false,"group":""},"173f12a360a642":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"&nbsp;the_context_object-&gt;transact(tr.code, buffer, &amp;reply, tr.flags);"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f12a390bbde","category":"default","type":"number","value":""},{"name":"名称","id":"173f12a390b2d3","category":"default","type":"string","value":""},{"name":"所有者","id":"173f12a390b29e","category":"default","type":"string","value":""},{"name":"连接","id":"173f12a390b7c4","category":"default","type":"link","value":""},{"name":"便笺","id":"173f12a390b9d8","category":"default","type":"string","value":""}],"props":{"zindex":37,"w":262,"h":65,"x":116.99999999999999,"y":1535.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f12a360a642","category":"basic","locked":false,"group":""},"173efff4284fa8":{"textBlock":[],"points":[{"x":700,"y":452.75},{"x":700,"y":452.75}],"dataAttributes":[],"props":{"zindex":10},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":700,"angle":4.71238898038469,"y":417.5,"id":"173effecf7fed4"},"id":"173efff4284fa8","to":{"x":700,"y":491.5,"angle":1.570796326794897,"id":"173effecf7f801"},"text":"","locked":false,"group":""},"173f0066c12213":{"textBlock":[],"points":[{"x":1257.75,"y":385},{"x":1257.75,"y":385}],"dataAttributes":[],"props":{"zindex":16},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1129.75,"angle":3.141592653589793,"y":385,"id":"173f001cea76f1"},"id":"173f0066c12213","to":{"x":1384.75,"angle":0,"y":385,"id":"173f00621341fc"},"text":"","locked":false,"group":""},"1766019b105b42":{"textBlock":[],"points":[{"x":408.75694444444423,"y":1965.6527777777776},{"x":408.75694444444423,"y":1965.6527777777776}],"dataAttributes":[],"props":{"zindex":56},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":408.75694444444423,"angle":4.71238898038469,"y":1915,"id":"17660196069502"},"id":"1766019b105b42","to":{"x":408.75694444444423,"y":2016.3055555555552,"angle":1.570796326794897,"id":"17660189b10095"},"text":"","locked":false,"group":""},"173ec5abe6c902":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>ServiceManager入口</div><div><br></div>frameworks/native/cmds/servicemanager/main.cpp<div><br></div><div><br></div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"top"},"title":"矩形","dataAttributes":[{"name":"序号","id":"173ec5abe6cf6b","category":"default","type":"number","value":""},{"name":"名称","id":"173ec5abe6ccba","category":"default","type":"string","value":""},{"name":"所有者","id":"173ec5abe6c05d","category":"default","type":"string","value":""},{"name":"连接","id":"173ec5abe6ce5","category":"default","type":"link","value":""},{"name":"便笺","id":"173ec5abe6ccdf","category":"default","type":"string","value":""}],"props":{"zindex":1,"w":191,"h":96,"x":506.5,"y":93.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173ec5abe6c902","category":"basic","locked":false,"group":""},"17660960fe552b":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"ServiceManager.java"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"17660960fe5a4b","category":"default","type":"number","value":""},{"name":"名称","id":"17660960fe5f2a","category":"default","type":"string","value":""},{"name":"所有者","id":"17660960fe55d1","category":"default","type":"string","value":""},{"name":"连接","id":"17660960fe579e","category":"default","type":"link","value":""},{"name":"便笺","id":"17660960fe5438","category":"default","type":"string","value":""}],"props":{"zindex":60,"w":167,"h":45,"x":449.5,"y":2345.25,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17660960fe552b","category":"basic","locked":false,"group":""},"1741e636749616":{"textBlock":[],"points":[{"x":453.9898003472222,"y":1570.5668402777778},{"x":453.9898003472222,"y":1570.5668402777778}],"dataAttributes":[],"props":{"zindex":51},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":379,"y":1570.5668402777778,"angle":3.1415926535897927,"id":"173f12a360a642"},"id":"1741e636749616","to":{"x":535.1148003472222,"y":1570.5668402777778,"angle":0,"id":"173f15a642499"},"text":"","locked":false,"group":""},"176609d0dda455":{"textBlock":[],"dataAttributes":[],"points":[{"x":215.5,"y":2541.25},{"x":215.5,"y":2541.25}],"props":{"zindex":83},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":215.5,"y":2511,"angle":4.71238898038469,"id":"1766095e7dba87"},"to":{"x":215.5,"y":2571.5,"angle":1.570796326794897,"id":"176609c7d43308"},"id":"176609d0dda455","text":"","locked":false,"group":""},"173effecf7f083":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"BinderInternal.getContextObject()&lt;源码android_util_Binder.cpp&gt;"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173effed6bfa64","category":"default","type":"number","value":""},{"name":"名称","id":"173effed6bfdc8","category":"default","type":"string","value":""},{"name":"所有者","id":"173effed6bfa29","category":"default","type":"string","value":""},{"name":"连接","id":"173effed6bfc9f","category":"default","type":"link","value":""},{"name":"便笺","id":"173effed6bf6eb","category":"default","type":"string","value":""}],"props":{"zindex":6,"w":191,"h":81,"x":311.5,"angle":0,"y":344.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173effecf7f083","category":"basic","locked":false,"group":""},"173f166a55678f":{"textBlock":[],"dataAttributes":[],"points":[{"x":1212,"y":1676.9340277777774},{"x":1212,"y":1676.9340277777774}],"props":{"zindex":49},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1212,"angle":4.71238898038469,"y":1614,"id":"173f15bb39cac2"},"to":{"x":1212,"y":1738.5,"angle":1.570796326794897,"id":"173f16690620a"},"id":"173f166a55678f","text":"","locked":false,"group":""},"173f15bb39cac2":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"Parcel.readStrongBinder<div></div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f15bb4a665b","category":"default","type":"number","value":""},{"name":"名称","id":"173f15bb4a672f","category":"default","type":"string","value":""},{"name":"所有者","id":"173f15bb4a6d21","category":"default","type":"string","value":""},{"name":"连接","id":"173f15bb4a66a","category":"default","type":"link","value":""},{"name":"便笺","id":"173f15bb4a67c7","category":"default","type":"string","value":""}],"props":{"zindex":46,"w":283,"h":89,"x":1070.5,"y":1525,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f15bb39cac2","category":"basic","locked":false,"group":""},"173f00206a5da6":{"textBlock":[],"points":[{"x":1025,"y":455.25},{"x":1025,"y":455.25}],"dataAttributes":[],"props":{"zindex":13},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1025,"angle":4.71238898038469,"y":417.5,"id":"173f001cea76f1"},"id":"173f00206a5da6","to":{"x":1025,"y":495.75,"angle":1.570796326794897,"id":"173f001fc07aef"},"text":"","locked":false,"group":""},"173f00aa91a77a":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"IPCThreadState.transact"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f00aaab6277","category":"default","type":"number","value":""},{"name":"名称","id":"173f00aaab65dc","category":"default","type":"string","value":""},{"name":"所有者","id":"173f00aaab6441","category":"default","type":"string","value":""},{"name":"连接","id":"173f00aaab6eec","category":"default","type":"link","value":""},{"name":"便笺","id":"173f00aaab65a3","category":"default","type":"string","value":""}],"props":{"zindex":19,"w":262,"h":65,"x":117,"angle":0,"y":770.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f00aa91a77a","category":"basic","locked":false,"group":""},"173effecf7f801":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"<div><span style=\"font-size: inherit;\">1:创建本地Binder代理对象BpBinder,</span><span style=\"font-size: inherit;\">ServiceManager对应的句柄始终是0</span></div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173effed6bf172","category":"default","type":"number","value":""},{"name":"名称","id":"173effed6bf3b2","category":"default","type":"string","value":""},{"name":"所有者","id":"173effed6bf829","category":"default","type":"string","value":""},{"name":"连接","id":"173effed6bfe47","category":"default","type":"link","value":""},{"name":"便笺","id":"173effed6bfd4c","category":"default","type":"string","value":""}],"props":{"zindex":5,"w":262,"h":81,"x":569,"y":491.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173effecf7f801","category":"basic","locked":false,"group":""},"1766098a470ea":{"textBlock":[],"points":[{"x":533,"y":2425.625},{"x":217.5,"y":2425.625}],"dataAttributes":[],"props":{"zindex":65},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"y":2390.25,"angle":4.71238898038469,"id":"17660960fe552b"},"id":"1766098a470ea","to":{"x":217.5,"y":2459,"angle":1.570796326794897,"id":"1766095e7dba87"},"text":"","locked":false,"group":""},"17663eb67a805b":{"textBlock":[],"points":[{"x":848,"y":2526},{"x":848,"y":2526}],"dataAttributes":[],"props":{"zindex":91},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":848,"angle":4.71238898038469,"y":2507.5,"id":"1766098601a956"},"id":"17663eb67a805b","to":{"x":848,"angle":1.570796326794897,"y":2544.5,"id":"17663eb5294d87"},"text":"","locked":false,"group":""},"1741e62de0fb21":{"textBlock":[],"dataAttributes":[],"points":[{"x":248.00000000000003,"y":1666.7682291666663},{"x":248.00000000000003,"y":1666.7682291666663}],"props":{"zindex":50},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":248.00000000000003,"y":1600.5,"angle":4.71238898038469,"id":"173f12a360a642"},"to":{"x":248.00000000000003,"y":1738.5,"angle":1.570796326794897,"id":"173f15a94d5416"},"id":"1741e62de0fb21","text":"","locked":false,"group":""},"1766098db922c3":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>BPBinder.c</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"middle"},"title":"矩形","dataAttributes":[{"name":"序号","id":"1766098df78e26","category":"default","type":"number","value":""},{"name":"名称","id":"1766098df78a7e","category":"default","type":"string","value":""},{"name":"所有者","id":"1766098df786fb","category":"default","type":"string","value":""},{"name":"连接","id":"1766098df78d17","category":"default","type":"link","value":""},{"name":"便笺","id":"1766098df78e88","category":"default","type":"string","value":""}],"props":{"zindex":66,"w":151,"h":45,"x":457.5,"y":2567.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766098db922c3","category":"basic","locked":false,"group":""},"173f001fc07aef":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"获取BpBinder对应的Java代理对象，也就是BinderProxy.java,并将BInderProxy的mNativeData属性设置为native对象BinderProxyNativeData"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f001fd0093f","category":"default","type":"number","value":""},{"name":"名称","id":"173f001fd0032c","category":"default","type":"string","value":""},{"name":"所有者","id":"173f001fd00018","category":"default","type":"string","value":""},{"name":"连接","id":"173f001fd00691","category":"default","type":"link","value":""},{"name":"便笺","id":"173f001fd0063a","category":"default","type":"string","value":""}],"props":{"zindex":12,"w":325.5,"h":72.5,"x":862.25,"y":495.75,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f001fc07aef","category":"basic","locked":false,"group":""},"173f16690620a":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"获取iBinder对应的java对象，在JavaBBinder里面有保存"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f1669143693","category":"default","type":"number","value":""},{"name":"名称","id":"173f16691431dc","category":"default","type":"string","value":""},{"name":"所有者","id":"173f16691435e","category":"default","type":"string","value":""},{"name":"连接","id":"173f1669143aec","category":"default","type":"link","value":""},{"name":"便笺","id":"173f1669143101","category":"default","type":"string","value":""}],"props":{"zindex":48,"w":283,"h":65,"x":1070.5,"y":1738.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f16690620a","category":"basic","locked":false,"group":""},"173f0311a02db8":{"textBlock":[],"dataAttributes":[],"points":[{"x":1479.937065972221,"y":910.9087301587299},{"x":1479.937065972221,"y":910.9087301587299}],"props":{"zindex":34},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1479.937065972221,"y":835.5,"angle":4.71238898038469,"id":"173f0305c5f59b"},"to":{"x":1479.937065972221,"angle":1.570796326794897,"y":988.8174603174598,"id":"173f0310bbf549"},"id":"173f0311a02db8","text":"","locked":false,"group":""},"173f15bca3752d":{"textBlock":[],"points":[{"x":997.65625,"y":1569.5},{"x":997.65625,"y":1569.5}],"dataAttributes":[],"props":{"zindex":47},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":924.25,"y":1569.5,"angle":3.141592653589793,"id":"173f15a642499"},"id":"173f15bca3752d","to":{"x":1070.5,"y":1569.5,"angle":0,"id":"173f15bb39cac2"},"text":"","locked":false,"group":""},"173f00621341fc":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"IServiceManager.Stub.Proxy.addService"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f006243c273","category":"default","type":"number","value":""},{"name":"名称","id":"173f006243c467","category":"default","type":"string","value":""},{"name":"所有者","id":"173f006243c29e","category":"default","type":"string","value":""},{"name":"连接","id":"173f006243c1c4","category":"default","type":"link","value":""},{"name":"便笺","id":"173f006243cdb3","category":"default","type":"string","value":""}],"props":{"zindex":15,"w":262,"h":65,"x":1384.75,"angle":0,"y":352.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f00621341fc","category":"basic","locked":false,"group":""},"1766019e298276":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"binder(none one way)流程图"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"1766019e37070e","category":"default","type":"number","value":""},{"name":"名称","id":"1766019e370361","category":"default","type":"string","value":""},{"name":"所有者","id":"1766019e370ae9","category":"default","type":"string","value":""},{"name":"连接","id":"1766019e370886","category":"default","type":"link","value":""},{"name":"便笺","id":"1766019e370c9b","category":"default","type":"string","value":""}],"props":{"zindex":57,"w":206,"h":52,"x":971.3680555555558,"angle":0,"y":1863},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766019e298276","category":"basic","locked":false,"group":""},"173f02bc33674f":{"textBlock":[],"points":[{"x":602,"y":901},{"x":602,"y":901}],"dataAttributes":[],"props":{"zindex":26},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":602,"angle":4.71238898038469,"y":835.5,"id":"173f0273d3d5cf"},"id":"173f02bc33674f","to":{"x":602,"angle":1.570796326794897,"y":969.75,"id":"173f02aecfa487"},"text":"","locked":false,"group":""},"17660189b10095":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"","dataAttributes":[],"props":{"zindex":53,"w":589.3683449074076,"h":300.3611111111113,"x":114.07277199074063,"y":2016.3055555555552,"angle":0},"path":[{"lineStyle":{"lineWidth":0},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"standardImage","fillStyle":{"imageW":844,"display":"stretch","imageH":491,"type":"image","fileId":"http://cdn.processon.com/5fd710895653bb06f33c7d58?e=1607933593&amp;token=trhI0BY8QfVrIGn9nENop6JAc6l5nZuxhjQ62UfM:wlJsOKY6YKC242rn2KhjR6MHf40="},"attribute":{"container":false,"rotatable":true,"visible":false,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17660189b10095","category":"standard","locked":false,"group":""},"1766098601a956":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>Binder.java</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"middle"},"title":"矩形","dataAttributes":[{"name":"序号","id":"176609860edb56","category":"default","type":"number","value":""},{"name":"名称","id":"176609860ede0a","category":"default","type":"string","value":""},{"name":"所有者","id":"176609860ed66e","category":"default","type":"string","value":""},{"name":"连接","id":"176609860ed9eb","category":"default","type":"link","value":""},{"name":"便笺","id":"176609860ed11d","category":"default","type":"string","value":""}],"props":{"zindex":62,"w":151,"h":45,"x":772.5,"angle":0,"y":2462.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"1766098601a956","category":"basic","locked":false,"group":""},"173effecf7fb16":{"textBlock":[],"points":[{"x":547,"y":385},{"x":547,"y":385}],"dataAttributes":[],"props":{"zindex":9},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":502.5,"angle":3.141592653589793,"y":385,"id":"173effecf7f083"},"id":"173effecf7fb16","to":{"x":594.5,"angle":0,"y":385,"id":"173effecf7fed4"},"text":"","locked":false,"group":""},"176609b25d1a5a":{"textBlock":[],"points":[{"x":362.0625,"y":2485},{"x":362.0625,"y":2485}],"dataAttributes":[],"props":{"zindex":78},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":266.625,"y":2485,"angle":3.141592653589793,"id":"1766095e7dba87"},"id":"176609b25d1a5a","to":{"x":457.5,"y":2485,"angle":0,"id":"1766097f767eaf"},"text":"","locked":false,"group":""},"173f0276e157b2":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"获取BinderProxy.mNativeData保存的BpBinder本地代理，调用transact。"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f0276efe1ee","category":"default","type":"number","value":""},{"name":"名称","id":"173f0276efeabf","category":"default","type":"string","value":""},{"name":"所有者","id":"173f0276efee6f","category":"default","type":"string","value":""},{"name":"连接","id":"173f0276efeb57","category":"default","type":"link","value":""},{"name":"便笺","id":"173f0276efefc6","category":"default","type":"string","value":""}],"props":{"zindex":22,"w":292,"h":65,"x":102,"angle":0,"y":997.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f0276e157b2","category":"basic","locked":false,"group":""},"173f02ae11d725":{"textBlock":[],"points":[{"x":440.875,"y":803},{"x":440.875,"y":803}],"dataAttributes":[],"props":{"zindex":24},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":379,"angle":3.141592653589793,"y":803,"id":"173f00aa91a77a"},"id":"173f02ae11d725","to":{"x":496.5,"angle":0,"y":803,"id":"173f0273d3d5cf"},"text":"","locked":false,"group":""},"176609a26394ac":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"/dev/binder"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"176609a292be6b","category":"default","type":"number","value":""},{"name":"名称","id":"176609a292bfc4","category":"default","type":"string","value":""},{"name":"所有者","id":"176609a292bfcc","category":"default","type":"string","value":""},{"name":"连接","id":"176609a292b5af","category":"default","type":"link","value":""},{"name":"便笺","id":"176609a292b0bb","category":"default","type":"string","value":""}],"props":{"zindex":73,"w":167,"h":45,"x":449.5,"y":2677.25,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"176609a26394ac","category":"basic","locked":false,"group":""},"17660991358bd6":{"textBlock":[],"dataAttributes":[],"points":[{"x":533,"y":2537.5},{"x":533,"y":2537.5}],"props":{"zindex":67},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":533,"angle":4.71238898038469,"y":2507.5,"id":"1766097f767eaf"},"to":{"x":533,"angle":1.570796326794897,"y":2567.5,"id":"1766098db922c3"},"id":"17660991358bd6","text":"","locked":false,"group":""},"176609d77d09e4":{"textBlock":[],"points":[{"x":955.25,"y":2645},{"x":955.25,"y":2644.75}],"dataAttributes":[],"props":{"zindex":85},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":923.5,"y":2645,"angle":3.141592653589793,"id":"17660992929d7b"},"id":"176609d77d09e4","to":{"x":987,"angle":0,"y":2644.75,"id":"176609d6409a75"},"text":"","locked":false,"group":""},"173f0310bbf549":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"1:参数读取，找到BC_TRANSACTION命令<div><br></div><div>2：因为handle为0，所以找到binder_context_mgr_node，这个节点是ServiceManger启动时注册的节点</div><div><br></div><div>3:找到flat_binder_object结构体，这个结构体封装的是需要添加的IBinder，在parcel中进行了展开，详情看Parcel.writeStrongBinder</div><div><br></div><div>4:由于这里添加的Binder为服务端BBinder,如果没有添加过，将会添加到binder_node节点中，这个节点是一个红黑树节点</div><div><br></div><div>5:&nbsp;ref = binder_get_ref_for_node(target_proc, node);在target_proc进程获取binder节点引用，binder节点只有一个，但是每个进程可以有一个指向节点的引用，这个target_proc就是ServiceManager进程。如果引用不存在就创建一个</div><div><br></div><div>6:fp-&gt;handle = ref-&gt;desc;将node的引用赋值给flat_binder_object，也就是要存在ServiceManger中的对象</div><div><br></div><div>7：fp-&gt;type = BINDER_TYPE_HANDLE;更新type为handle在后面从Parcel中读取的时候会用到</div><div><br></div><div>8:binder_thread_read返回BR_TRANSACTION</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f0310cf822c","category":"default","type":"number","value":""},{"name":"名称","id":"173f0310cf8cf6","category":"default","type":"string","value":""},{"name":"所有者","id":"173f0310cf8f66","category":"default","type":"string","value":""},{"name":"连接","id":"173f0310cf84ab","category":"default","type":"link","value":""},{"name":"便笺","id":"173f0310cf8408","category":"default","type":"string","value":""}],"props":{"zindex":33,"w":444.5703125,"h":400.5,"x":1257.651909722221,"angle":0,"y":988.8174603174598},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f0310bbf549","category":"basic","locked":false,"group":""},"173f02bf2619fd":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div></div>waitForResponse-&gt;talkWithDriver"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f02bf34a3da","category":"default","type":"number","value":""},{"name":"名称","id":"173f02bf34aa1d","category":"default","type":"string","value":""},{"name":"所有者","id":"173f02bf34a89e","category":"default","type":"string","value":""},{"name":"连接","id":"173f02bf34a63f","category":"default","type":"link","value":""},{"name":"便笺","id":"173f02bf34ad4c","category":"default","type":"string","value":""}],"props":{"zindex":27,"w":211,"h":65,"x":845.75,"angle":0,"y":770.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f02bf2619fd","category":"basic","locked":false,"group":""},"176609df951301":{"textBlock":[],"dataAttributes":[],"points":[{"x":957.125,"y":2485},{"x":957.125,"y":2485}],"props":{"zindex":87},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":923.5,"y":2485,"angle":3.141592653589793,"id":"1766098601a956"},"to":{"x":992,"angle":0,"y":2485,"id":"176609dd3a5f16"},"id":"176609df951301","text":"","locked":false,"group":""},"17660992929d7b":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div>BBinder.c</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"center","vAlign":"middle"},"title":"矩形","dataAttributes":[{"name":"序号","id":"17660992b0da26","category":"default","type":"number","value":""},{"name":"名称","id":"17660992b0da7c","category":"default","type":"string","value":""},{"name":"所有者","id":"17660992b0d553","category":"default","type":"string","value":""},{"name":"连接","id":"17660992b0df4","category":"default","type":"link","value":""},{"name":"便笺","id":"17660992b0d09b","category":"default","type":"string","value":""}],"props":{"zindex":68,"w":151,"h":45,"x":772.5,"angle":0,"y":2622.5},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"17660992929d7b","category":"basic","locked":false,"group":""},"173f0305c5f59b":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h","x":10,"y":0},"text":"<div></div>binder_ioctl_write_read&lt;binder.c&gt;"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{},"title":"矩形","dataAttributes":[{"name":"序号","id":"173f0305d985da","category":"default","type":"number","value":""},{"name":"名称","id":"173f0305d98b9b","category":"default","type":"string","value":""},{"name":"所有者","id":"173f0305d98d68","category":"default","type":"string","value":""},{"name":"连接","id":"173f0305d98408","category":"default","type":"link","value":""},{"name":"便笺","id":"173f0305d980c7","category":"default","type":"string","value":""}],"props":{"zindex":31,"w":239.25,"h":65,"x":1360.4856288580233,"y":770.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w","action":"line","y":"0"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"action":"close"}]}],"lineStyle":{},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"rectangle","fillStyle":{},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f0305c5f59b","category":"basic","locked":false,"group":""},"173f03f6dbf637":{"textBlock":[],"points":[{"x":1024.75,"y":297.5},{"x":1024.75,"y":297.5}],"dataAttributes":[],"props":{"zindex":36},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":1024.75,"angle":1.570796326794897,"y":352.5,"id":"173f001cea76f1"},"id":"173f03f6dbf637","to":{"x":1024.75,"y":243,"angle":4.71238898038469,"id":"173f0395c25585"},"text":"","locked":false,"group":""},"173f0395c25585":{"parent":"","link":"","shapeStyle":{"alpha":1},"textBlock":[{"position":{"w":"w-20","h":"h-20","x":10,"y":10},"text":"&nbsp;1：ibinderForJavaObject这个方法是获取java对象对应的native端ibinder，以ActivityManagerService为例，每个继承自Binder的类都有一个mObject对象，这个对象保存的就是native端的 JavaBBinderHolder<div><br></div><div>2：JavaBBinderHolder的get方法返回JavaBBinder,里面保存了远端Service对象， ActivityManagerService...</div>"}],"anchors":[{"x":"w/2","y":"0"},{"x":"w/2","y":"h"},{"x":"0","y":"h/2"},{"x":"w","y":"h/2"}],"fontStyle":{"textAlign":"left","vAlign":"top"},"title":"备注","dataAttributes":[{"name":"序号","id":"173f0395d6d83d","category":"default","type":"number","value":""},{"name":"名称","id":"173f0395d6db6a","category":"default","type":"string","value":""},{"name":"所有者","id":"173f0395d6da58","category":"default","type":"string","value":""},{"name":"连接","id":"173f0395d6d164","category":"default","type":"link","value":""},{"name":"便笺","id":"173f0395d6d0c8","category":"default","type":"string","value":""}],"props":{"zindex":35,"w":350.25,"h":161.5,"x":849.625,"y":81.5,"angle":0},"path":[{"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]},{"fillStyle":{"color":"r-50,g-50,b-50","type":"solid"},"actions":[{"x":"w-16","action":"move","y":"0"},{"x":"w-16","action":"line","y":"16"},{"x":"w","action":"line","y":"16"},{"action":"close"}]},{"fillStyle":{"type":"none"},"actions":[{"x":"0","action":"move","y":"0"},{"x":"w-16","action":"line","y":"0"},{"x":"w","action":"line","y":"16"},{"x":"w","action":"line","y":"h"},{"x":"0","action":"line","y":"h"},{"x":"0","action":"line","y":"0"},{"action":"close"}]}],"lineStyle":{"lineWidth":0},"children":[],"resizeDir":["tl","tr","br","bl"],"name":"note","fillStyle":{"color":"255, 255, 170"},"attribute":{"container":false,"rotatable":true,"visible":true,"collapsable":false,"collapsed":false,"linkable":true,"markerOffset":5},"id":"173f0395c25585","category":"basic","locked":false,"group":""},"173ec602431d11":{"textBlock":[],"points":[{"x":459,"y":141.5},{"x":459,"y":141.5}],"dataAttributes":[],"props":{"zindex":3},"linkerType":"broken","lineStyle":{},"name":"linker","from":{"x":506.5,"y":141.5,"angle":0,"id":"173ec5abe6c902"},"id":"173ec602431d11","to":{"x":415,"y":141.5,"angle":3.141592653589793,"id":"173ec5bfe5866c"},"text":"","locked":false,"group":""}},"page":{"padding":20,"orientation":"portrait","backgroundColor":"transparent","gridSize":15,"width":2162,"showGrid":true,"lineJumps":false,"height":2883},"version":512}},"meta":{"exportTime":"2023-04-10 20:14:24","member":"","diagramInfo":{"creator":"","created":"2020-08-14 09:15:32","modified":"2023-02-15 14:32:41","title":"Android Binder","category":"uml"},"id":"5f35e5b407912920b49b2ffa","type":"ProcessOn Schema File","version":"1.0"}}